import streamlit as st
import yfinance as yf
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import scipy.optimize as sco

# -----------------------------
# ページ設定・タイトル
# -----------------------------
st.set_page_config(page_title="かんたん株式分散シミュレーター", layout="wide")
st.title("🔰 かんたん株式分散シミュレーター")
st.markdown("専門知識がなくても使える、**過去データに基づく資産配分シミュレーター**です。")

# -----------------------------
# 免責（社外公開向け：常時表示 + 詳細）
# -----------------------------
with st.expander("⚠️ ご利用にあたっての重要な注意（必ずお読みください）"):
    st.markdown("""
本アプリは情報提供を目的としたものであり、特定の金融商品の購入・売却・保有を推奨・勧誘するものではありません。  
表示される結果は、過去の市場データに基づくシミュレーションであり、将来の運用成果を保証するものではありません。  
本アプリの利用によって生じたいかなる損失についても、開発者および提供者は一切の責任を負いません。  
投資に関する最終判断は、必ずご自身の責任で行ってください。
""")

# -----------------------------
# サイドバー設定
# -----------------------------
st.sidebar.header("🛠️ 設定パネル")
st.sidebar.info("💡 ヒント: マウスを項目の上に乗せると、詳しい説明が表示されます。")

default_tickers = "8802.T, 7203.T, 6758.T, 8306.T, 9984.T"
tickers_input = st.sidebar.text_area(
